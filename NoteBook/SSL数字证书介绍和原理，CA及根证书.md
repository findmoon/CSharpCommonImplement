**SSL和TLS介绍和基本原理，CA、证书及根证书**

[toc]

关于服务器的安全，总的可以分为如下独立的部分：

- 运行应用程序的服务器的安全。
- 获得授权的应用程序用户才可以访问其被授权的资源或功能。
- 用户可以确认其连接的服务器是正确且需要的服务器（不是伪造的、不需要使用的服务器），同时，也应该确保客户端和服务器之间交互数据的安全性。

对于Web服务来说，第一部分的安全由服务器系统(Linux、Windows)和Web服务器程序（Nginx、Apache、IIS等）的安全机制提供；第二部分则由Web服务器（Nginx、Apache、IIS等）和Web应用程序共同保证对用户的授权和认证。而客户端和服务器之间交互的安全性，则需要用到 **安全套接字层（Secure Sockets Layer，SSL）** 和 **传输层安全性（Transport Layer Security，TLS）**，用以保证 **对服务器和用户的身份进行验证、对机器间传输的数据进行加密** 等。

# SSL/TLS介绍

## SSL/TLS 的作用

**互联网的通信安全，建立在SSL/TLS协议之上。** 

SSL/TLS协议主要解决开放的互联网中面临的三大风险：

1. 所有信息**加密传播**，第三方无法窃听。【窃听风险（eavesdropping），防止他人获取通信内容。】

数据加密，确保数据的传输安全，避免传输的数据（包括传输的证书）遭受窃听攻击。

2. 具有**校验机制**，一旦被篡改，通信双方会立刻发现。【篡改风险（tampering），防止第三方修改通信内容。】

信息的完整性验证机制，确保数据的完整性（数据在传输中不能更改）。

3. 配备**身份证书**，防止身份被冒充。【冒充风险（pretending），防止第三方冒充他人身份参与通信。】

身份验证，确保会话的双方（客户端和服务器）都能彼此信任对方的服务器或客户端，TLS在握手进程中内置了身份验证功能。

## SSL/TLS 的历史

- 1994年，NetScape公司设计了SSL协议（Secure Sockets Layer）的1.0版，但是未发布。

- 1995年，NetScape公司发布SSL 2.0版，很快发现有严重漏洞。

- 1996年，SSL 3.0版问世，得到大规模应用。

- 1999年，互联网标准化组织ISOC接替NetScape公司，发布了SSL的升级版TLS 1.0版。

- 2006年和2008年，分别发布了TLS 1.1版和TLS 1.2版。2011年发布了TLS 1.2的修订版。

- 2018 年 8 月 10 日，**TLS 1.3 最终版本发布，它使得互联网变得更快、更安全**。

主流浏览器都支持TLS 1.2、TLS 1.3，其应用也相当普遍，并且TLS 1.3的采用率也在不断提高，很多浏览器基本已经开始不支持 TLS 1.0 或 TLS 1.1，至少会进行危险提示。

> **TLS 1.0通常被标示为SSL 3.1，TLS 1.1为SSL 3.2，TLS 1.2为SSL 3.3。**

通常，对于安全HTTP，SSL 和 TLS 两个术语是可以互换使用的，可视为等同。而 **FTP、SMTP等协议，通常则使用 TLS**。

# SSL协议的握手过程



# SSL/TLS 中的一些概念

- CA(`Certificate Authority`)被称为证书授权中心，是数字证书发放和管理的机构。CA机构是作为受信任的第三方存在，是可信的。可以自己管理哪些ca是受信任的。

- CA证书有两个作用：一是 签发数字证书（用户找CA为自己的服务器签发）；二是 校验数字证书（客户找CA校验收到的证书是否合法有效）

- 根证书是CA认证中心给自己颁发的证书，是信任链的起始点。安装根证书意味着对这个CA认证中心的信任。
数字证书颁发过程一般为：
用户首先产生自己的密钥对，
将公共密钥（公钥）及部分个人身份信息传送给认证中心
认证中心在核实身份后，将执行一些必要的步骤，以确信请求确实由用户发送而来，然后，认证中心将发给用户一个数字证书，该证书内包含用户的个人信息和他的公钥信息，同时还附有认证中心的签名信息


## 