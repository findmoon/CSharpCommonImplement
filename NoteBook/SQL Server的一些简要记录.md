**SQL Server的一些简要记录**

[toc]

# 安装好数据库后怎么启用sa账户

1. 先使用Windows账号登陆数据库

2. 启用Windows身份验证方式和SQL Server身份验证方式
   1. 选择数据库“实例”，右键 -> 属性 -> 安全性 -> 服务器身份验证 -> SQL Server和Windows身份验证（选中）-> 确定。
   2. 重启SQL Server服务。

3. 启用sa账号（如果已启用则跳过）
   1. 依旧Windows身份登陆
   2. 在数据库服务器的 安全性 -> 登录名 -> sa -> 右键 -> 属性 -> 状态 -> 登陆 -> 启用，确定。

4. 修改sa密码
   1. 安全性 -> 登录名 -> sa -> 右键 -> 属性 -> 常规 中，修改密码，根据需要可以勾选“强制实施密码策略”，确定。

# 表示字符串(文本)的类型

char、nchar、varchar、nvarchar、text、ntext、varchar(max)、nvarchar(max)

`varchar(n)`：长度为 n 个字节的可变长度且非 Unicode 的字符数据。n 必须是一个介于 1 和 8,000 之间的数值。存储大小为输入数据的字节的实际长度，而不是 n 个字节。存储中文等双字节字符占用2个字节，存储英文、数字等每个字符占用1个字节。

`nvarchar(n)`：包含 n 个字符的可变长度 Unicode 字符数据。n 的值必须介于 1 与 4,000 之间。每个字符占用2个字节（双字节存储），字节的存储大小是所输入字符个数的两倍。

比如 **`我和coffee` 字符内容，如果使用varchar存储，则占用2x2+6=10个字节的存储空间；如果使用nvarchar存储，则占用8x2=16个字节的存储空间。**

如字段值只是英文可选择varchar，而字段值存在较多的双字节（中文、韩文等）字符时用nvarchar

1、CHAR。CHAR存储定长数据很方便，CHAR字段上的索引效率级高，比如定义char(10)，那么不论你存储的数据是否达到了10个字节，都要占去10个字节的空间,不足的自动用空格填充，所以在读取的时候可能要多次用到trim（）。

2、VARCHAR。存储变长数据，但存储效率没有CHAR高。如果一个字段可能的值是不固定长度的，我们只知道它不可能超过10个字符，把它定义为 VARCHAR(10)是最合算的。VARCHAR类型的实际长度是它的值的实际长度+1。为什么“+1”呢？这一个字节用于保存实际使用了多大的长度。从空间上考虑，用varchar合适；从效率上考虑，用char合适，关键是根据实际情况找到权衡点。

3、TEXT。text存储可变长度的非Unicode数据，最大长度为2^31-1(2,147,483,647)个字符。【即4GB大小】

4、NCHAR、NVARCHAR、NTEXT 中的 N 表示存储的是Unicode编码数据的字符。

Unicode字符集是为了解决不同编码的字符集不兼容的问题而产生的，它所有的字符都用两个字节表示，即英文字符也是用两个字节表示。

5、varchar(max)、nvarchar(max) 是 SQL Server 2005 推出的新的类型，用以替代 text、ntext，**如果要存储大文本对象，推荐使用 varchar(max)、nvarchar(max)。**